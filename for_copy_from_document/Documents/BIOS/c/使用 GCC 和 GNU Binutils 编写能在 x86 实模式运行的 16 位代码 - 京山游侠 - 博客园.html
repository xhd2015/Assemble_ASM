<!DOCTYPE html>
<html lang="zh-cn"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>使用 GCC 和 GNU Binutils 编写能在 x86 实模式运行的 16 位代码 - 京山游侠 - 博客园</title>
<link type="text/css" rel="stylesheet" href="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/blog-common.css">
<link id="MainCss" type="text/css" rel="stylesheet" href="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/bundle-KJC.css">
<link type="text/css" rel="stylesheet" href="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/20135.css">
<link id="mobile-style" media="only screen and (max-width: 768px)" type="text/css" rel="stylesheet" href="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/bundle-KJC-mobile.css">
<link title="RSS" type="application/rss+xml" rel="alternate" href="http://www.cnblogs.com/youxia/rss">
<link title="RSD" type="application/rsd+xml" rel="EditURI" href="http://www.cnblogs.com/youxia/rsd.xml">
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="http://www.cnblogs.com/youxia/wlwmanifest.xml">
<script src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/jquery.js" type="text/javascript"></script>  
<script type="text/javascript">var currentBlogApp = 'youxia', cb_enable_mathjax=true;var isLogined=true;</script>
<script src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/blog-common.js" type="text/javascript"></script>
<script type="text/x-mathjax-config;executed=true">MathJax.Hub.Config({
  tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] },
  TeX: { equationNumbers: { autoNumber: ['AMS'], useLabelIds: true } },
  'HTML-CSS': { linebreaks: { automatic: true } },
  SVG: { linebreaks: { automatic: true } }});</script><script type="text/javascript" src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/MathJax.js"></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck.RTL {right: .7em; left: auto}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1px; bottom: 2px; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">.MathJax_Display {text-align: center; margin: 1em 0em; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MathJax .MJX-monospace {font-family: monospace}
.MathJax .MJX-sans-serif {font-family: sans-serif}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax:focus, body :focus .MathJax {display: inline-table}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0!important; padding: 0!important; margin: 0!important; vertical-align: 0!important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none}
.MathJax nobr {white-space: nowrap!important}
.MathJax img {display: inline!important; float: none!important}
.MathJax * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_ExBox {display: block!important; overflow: hidden; width: 1px; height: 60ex; min-height: 0; max-height: none}
.MathJax .MathJax_EmBox {display: block!important; overflow: hidden; width: 1px; height: 60em; min-height: 0; max-height: none}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Main; src: url('http://mathjax.cnblogs.com/2_6_1/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff?rev=2.6.1') format('woff'), url('http://mathjax.cnblogs.com/2_6_1/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf?rev=2.6.1') format('opentype')}
@font-face {font-family: MathJax_Main; src: url('http://mathjax.cnblogs.com/2_6_1/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff?rev=2.6.1') format('woff'), url('http://mathjax.cnblogs.com/2_6_1/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf?rev=2.6.1') format('opentype'); font-weight: bold}
@font-face {font-family: MathJax_Main; src: url('http://mathjax.cnblogs.com/2_6_1/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff?rev=2.6.1') format('woff'), url('http://mathjax.cnblogs.com/2_6_1/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf?rev=2.6.1') format('opentype'); font-style: italic}
@font-face {font-family: MathJax_Math; src: url('http://mathjax.cnblogs.com/2_6_1/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff?rev=2.6.1') format('woff'), url('http://mathjax.cnblogs.com/2_6_1/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf?rev=2.6.1') format('opentype'); font-style: italic}
@font-face {font-family: MathJax_Caligraphic; src: url('http://mathjax.cnblogs.com/2_6_1/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff?rev=2.6.1') format('woff'), url('http://mathjax.cnblogs.com/2_6_1/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf?rev=2.6.1') format('opentype')}
@font-face {font-family: MathJax_Size1; src: url('http://mathjax.cnblogs.com/2_6_1/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff?rev=2.6.1') format('woff'), url('http://mathjax.cnblogs.com/2_6_1/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf?rev=2.6.1') format('opentype')}
@font-face {font-family: MathJax_Size2; src: url('http://mathjax.cnblogs.com/2_6_1/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff?rev=2.6.1') format('woff'), url('http://mathjax.cnblogs.com/2_6_1/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf?rev=2.6.1') format('opentype')}
@font-face {font-family: MathJax_Size3; src: url('http://mathjax.cnblogs.com/2_6_1/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff?rev=2.6.1') format('woff'), url('http://mathjax.cnblogs.com/2_6_1/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf?rev=2.6.1') format('opentype')}
@font-face {font-family: MathJax_Size4; src: url('http://mathjax.cnblogs.com/2_6_1/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff?rev=2.6.1') format('woff'), url('http://mathjax.cnblogs.com/2_6_1/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf?rev=2.6.1') format('opentype')}
.MathJax .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>
<body><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px none; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div id="MathJax_Message" style="display: none;"></div>
<a name="top"></a>

<table class="Framework" cellspacing="0" cellpadding="0" width="100%">
	<tbody><tr>
		<td colspan="3">
			
<div id="top">
<table cellspacing="0" cellpadding="10">
	<tbody><tr>
		<td nowrap="nowrap">
			<h1><a id="Header1_HeaderTitle" class="headermaintitle" href="http://www.cnblogs.com/youxia/">京山游侠</a></h1>
			专注技术　拒绝扯淡
		</td>
	</tr>
</tbody></table>
</div>
<div id="sub">
	<div id="sub-right"><div id="blog_stats">
<div class="BlogStats">posts - 46, comments - 258, trackbacks - 2, articles - 0</div></div></div>
	
&nbsp;
<a id="blog_nav_sitehome" href="http://www.cnblogs.com/">博客园</a>&nbsp;:: 
<a id="blog_nav_myhome" href="http://www.cnblogs.com/youxia/">首页</a>&nbsp;::
<a id="blog_nav_newpost" rel="nofollow" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">新随笔</a>&nbsp;::
<a id="blog_nav_contact" accesskey="9" rel="nofollow" href="https://msg.cnblogs.com/send/%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0">联系</a>&nbsp;::
<a id="blog_nav_rss" href="http://www.cnblogs.com/youxia/rss">订阅</a>
<a id="blog_nav_rss_image" class="XMLLink" href="http://www.cnblogs.com/youxia/rss"><img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/xml.gif" alt="订阅"></a>&nbsp;::
<a id="blog_nav_admin" rel="nofollow" href="https://i.cnblogs.com/">管理</a>

</div>
		</td>
	</tr>
	<tr>
		<td class="LeftCell">
			<div id="leftmenu">
            	
		            <div id="blog-calendar" style=""><table id="blogCalendar" class="Cal" title="Calendar" cellspacing="0" cellpadding="0">
	<tbody><tr><td colspan="7"><table class="CalTitle" cellspacing="0">
		<tbody><tr><td class="CalNextPrev"><a href="javascript:void(0);" onclick="loadBlogCalendar('2016/10/01');return false;">&lt;</a></td><td align="center">2016年11月</td><td class="CalNextPrev" align="right"><a href="javascript:void(0);" onclick="loadBlogCalendar('2016/12/01');return false;">&gt;</a></td></tr>
	</tbody></table></td></tr><tr><th class="CalDayHeader" abbr="日" scope="col" align="center">日</th><th class="CalDayHeader" abbr="一" scope="col" align="center">一</th><th class="CalDayHeader" abbr="二" scope="col" align="center">二</th><th class="CalDayHeader" abbr="三" scope="col" align="center">三</th><th class="CalDayHeader" abbr="四" scope="col" align="center">四</th><th class="CalDayHeader" abbr="五" scope="col" align="center">五</th><th class="CalDayHeader" abbr="六" scope="col" align="center">六</th></tr><tr><td class="CalOtherMonthDay" align="center">30</td><td class="CalOtherMonthDay" align="center">31</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">4</td><td class="CalWeekendDay" align="center">5</td></tr><tr><td class="CalWeekendDay" align="center">6</td><td align="center">7</td><td align="center">8</td><td align="center">9</td><td align="center">10</td><td align="center">11</td><td class="CalWeekendDay" align="center">12</td></tr><tr><td class="CalWeekendDay" align="center">13</td><td align="center">14</td><td align="center">15</td><td align="center">16</td><td class="CalTodayDay" align="center">17</td><td align="center">18</td><td class="CalWeekendDay" align="center">19</td></tr><tr><td class="CalWeekendDay" align="center">20</td><td align="center">21</td><td align="center">22</td><td align="center">23</td><td align="center">24</td><td align="center">25</td><td class="CalWeekendDay" align="center">26</td></tr><tr><td class="CalWeekendDay" align="center">27</td><td align="center">28</td><td align="center">29</td><td align="center">30</td><td class="CalOtherMonthDay" align="center">1</td><td class="CalOtherMonthDay" align="center">2</td><td class="CalOtherMonthDay" align="center">3</td></tr><tr><td class="CalOtherMonthDay" align="center">4</td><td class="CalOtherMonthDay" align="center">5</td><td class="CalOtherMonthDay" align="center">6</td><td class="CalOtherMonthDay" align="center">7</td><td class="CalOtherMonthDay" align="center">8</td><td class="CalOtherMonthDay" align="center">9</td><td class="CalOtherMonthDay" align="center">10</td></tr>
</tbody></table></div><script type="text/javascript">loadBlogDefaultCalendar();</script>
		            
<div id="cell">
<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/icon-group.jpg" vspace="2" hspace="5" align="left"><h3>公告</h3>
<div id="news">
	<div id="blog-news"><div id="profile_block">昵称：<a href="http://home.cnblogs.com/u/youxia/">京山游侠</a><br>园龄：<a href="http://home.cnblogs.com/u/youxia/" title="入园时间：2006-07-17">10年4个月</a><br>粉丝：<a href="http://home.cnblogs.com/u/youxia/followers/">389</a><br>关注：<a href="http://home.cnblogs.com/u/youxia/followees/">182</a><div id="p_b_follow"><a href="javascript:void(0);" onclick="follow('eb5a360b-63cf-dd11-9e4d-001cf0cd104b')">+加关注</a></div></div></div><script type="text/javascript">loadBlogNews();</script>
</div>
</div>

	            
	            <div id="blog-sidecolumn"><div id="sidebar_search" class="sidebar-block">
<div id="cell">
<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/icon-group.jpg" vspace="2" hspace="5" align="left">
<h3 class="catListTitle">搜索</h3>
<div id="widget_my_zzk" class="div_my_zzk"><input id="q" onkeydown="return zzk_go_enter(event);" class="input_my_zzk" type="text">&nbsp;<input onclick="zzk_go()" value="找找看" id="btnZzk" class="btn_my_zzk" type="button"></div>
<div id="widget_my_google" class="div_my_zzk"><input name="google_q" id="google_q" onkeydown="return google_go_enter(event)" class="input_my_zzk" type="text">&nbsp;<input onclick="google_go()" value="谷歌搜索" class="btn_my_zzk" type="button"></div>
</div></div><div id="sidebar_shortcut" class="sidebar-block">
<div id="cell">
<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/icon-group.jpg" vspace="2" hspace="5" align="left">
<h3>常用链接</h3>
<ul>
<li><a href="http://www.cnblogs.com/youxia/p/" title="我的博客的随笔列表">我的随笔</a></li><li><a href="http://www.cnblogs.com/youxia/MyComments.html" title="我发表过的评论列表">我的评论</a></li><li><a href="http://www.cnblogs.com/youxia/OtherPosts.html" title="我评论过的随笔列表">我的参与</a></li><li><a href="http://www.cnblogs.com/youxia/RecentComments.html" title="我的博客的评论列表">最新评论</a></li><li><a href="http://www.cnblogs.com/youxia/tag/" title="我的博客的标签列表">我的标签</a></li>
<li><a id="itemListLink" onclick="this.blur();WarpClass('itemListLink', 'itemListLin_con');return false;" href="#">更多链接</a></li>
</ul>
<div id="itemListLin_con" style="display:none;">

</div>
</div></div><div id="sidebar_toptags" class="sidebar-block">
<div id="cell">
<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/icon-group.jpg" vspace="2" hspace="5" align="left">
<h3>我的标签</h3>
<div id="MyTag">
<ul>
<li><a href="http://www.cnblogs.com/youxia/tag/Linux/">Linux</a>(41)</li><li><a href="http://www.cnblogs.com/youxia/tag/Fedora/">Fedora</a>(7)</li><li><a href="http://www.cnblogs.com/youxia/tag/Java/">Java</a>(7)</li><li><a href="http://www.cnblogs.com/youxia/tag/%E8%99%9A%E6%8B%9F%E6%9C%BA/">虚拟机</a>(4)</li><li><a href="http://www.cnblogs.com/youxia/tag/%E6%A1%8C%E9%9D%A2%E7%BE%8E%E5%8C%96/">桌面美化</a>(2)</li><li><a href="http://www.cnblogs.com/youxia/tag/%E5%AD%97%E4%BD%93/">字体</a>(2)</li><li><a href="http://www.cnblogs.com/youxia/tag/latex/">latex</a>(2)</li><li><a href="http://www.cnblogs.com/youxia/tag/Eclipse/">Eclipse</a>(2)</li><li><a href="http://www.cnblogs.com/youxia/tag/%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F/">数学公式</a>(2)</li><li><a href="http://www.cnblogs.com/youxia/tag/Bash/">Bash</a>(2)</li><li><a href="http://www.cnblogs.com/youxia/tag/">更多</a></li>
</ul>
</div>
</div></div><div id="sidebar_categories">
		<div id="cell">
		<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/icon-group.jpg" vspace="2" hspace="5" align="left"><h3>随笔分类<span style="font-size:11px;font-weight:normal">(46)</span></h3>
		
				<ul>
			
				<li><a id="CatList_LinkList_0_Link_0" href="http://www.cnblogs.com/youxia/category/582952.html">[01]企业级开发有什么(7)</a>
				</li>
			
				<li><a id="CatList_LinkList_0_Link_1" href="http://www.cnblogs.com/youxia/category/582949.html">[02]Linux江湖(32)</a>
				</li>
			
				<li><a id="CatList_LinkList_0_Link_2" href="http://www.cnblogs.com/youxia/category/582951.html">[03]GUI编程</a>
				</li>
			
				<li><a id="CatList_LinkList_0_Link_3" href="http://www.cnblogs.com/youxia/category/582950.html">[04]高性能计算和3D视觉呈现</a>
				</li>
			
				<li><a id="CatList_LinkList_0_Link_4" href="http://www.cnblogs.com/youxia/category/672232.html">[05]不好分类的零散笔记(7)</a>
				</li>
			
				</ul>
			</div>
	
		<div id="cell">
		<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/icon-group.jpg" vspace="2" hspace="5" align="left"><h3>随笔档案<span style="font-size:11px;font-weight:normal">(46)</span></h3>
		
				<ul>
			
				<li><a id="CatList_LinkList_1_Link_0" href="http://www.cnblogs.com/youxia/archive/2016/09.html">2016年9月 (3)</a>
				</li>
			
				<li><a id="CatList_LinkList_1_Link_1" href="http://www.cnblogs.com/youxia/archive/2016/08.html">2016年8月 (5)</a>
				</li>
			
				<li><a id="CatList_LinkList_1_Link_2" href="http://www.cnblogs.com/youxia/archive/2016/07.html">2016年7月 (1)</a>
				</li>
			
				<li><a id="CatList_LinkList_1_Link_3" href="http://www.cnblogs.com/youxia/archive/2015/09.html">2015年9月 (6)</a>
				</li>
			
				<li><a id="CatList_LinkList_1_Link_4" href="http://www.cnblogs.com/youxia/archive/2015/04.html">2015年4月 (6)</a>
				</li>
			
				<li><a id="CatList_LinkList_1_Link_5" href="http://www.cnblogs.com/youxia/archive/2015/03.html">2015年3月 (5)</a>
				</li>
			
				<li><a id="CatList_LinkList_1_Link_6" href="http://www.cnblogs.com/youxia/archive/2015/02.html">2015年2月 (2)</a>
				</li>
			
				<li><a id="CatList_LinkList_1_Link_7" href="http://www.cnblogs.com/youxia/archive/2015/01.html">2015年1月 (4)</a>
				</li>
			
				<li><a id="CatList_LinkList_1_Link_8" href="http://www.cnblogs.com/youxia/archive/2014/12.html">2014年12月 (2)</a>
				</li>
			
				<li><a id="CatList_LinkList_1_Link_9" href="http://www.cnblogs.com/youxia/archive/2014/10.html">2014年10月 (2)</a>
				</li>
			
				<li><a id="CatList_LinkList_1_Link_10" href="http://www.cnblogs.com/youxia/archive/2014/09.html">2014年9月 (2)</a>
				</li>
			
				<li><a id="CatList_LinkList_1_Link_11" href="http://www.cnblogs.com/youxia/archive/2014/08.html">2014年8月 (1)</a>
				</li>
			
				<li><a id="CatList_LinkList_1_Link_12" href="http://www.cnblogs.com/youxia/archive/2014/07.html">2014年7月 (1)</a>
				</li>
			
				<li><a id="CatList_LinkList_1_Link_13" href="http://www.cnblogs.com/youxia/archive/2014/06.html">2014年6月 (5)</a>
				</li>
			
				<li><a id="CatList_LinkList_1_Link_14" href="http://www.cnblogs.com/youxia/archive/2014/05.html">2014年5月 (1)</a>
				</li>
			
				</ul>
			</div>
	
		<div id="cell">
		<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/icon-group.jpg" vspace="2" hspace="5" align="left"><h3>我的博客系列</h3>
		
				<ul>
			
				<li><a id="CatList_LinkList_2_Link_0" href="http://www.cppblog.com/youxia" rel="nofollow" target="_blank">我的 c++ 博客</a>
				</li>
			
				<li><a id="CatList_LinkList_2_Link_1" href="http://www.blogjava.net/youxia" rel="nofollow" target="_blank">我的 Java 博客</a>
				</li>
			
				</ul>
			</div>
	</div><div id="sidebar_scorerank" class="sidebar-block">
<div id="cell">
<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/icon-group.jpg" vspace="2" hspace="5" align="left"><h3>积分与排名</h3>
<ul>
	<li>
		积分 -
		107950
	</li><li>
		排名 -
		2047
	</li>
</ul>
</div>
</div><div id="recent_comments_wrap">
    <div id="cell">
        <img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/icon-group.jpg" vspace="2" hspace="5" align="left">
        <h3>最新评论</h3>
        <div class="RecentComment">
            <div id="RecentCommentsBlock"><ul>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/youxia/p/linux030.html#3525123">1. Re:Linux应用环境实战30：让Ubuntu桌面自动更换壁纸</a></li>
        <li class="recent_comment_body">@DorothyDC改了几行，可以使用了，但是生成的.xml文件最后需要增加一行形成回路，否则会有bug：当切换到最后一张壁纸时，可能不再会切换。 修改后的代码：#!/bin/bashlast_fil......</li>
        <li class="recent_comment_author">--听风流水</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/youxia/p/linux030.html#3525051">2. Re:Linux应用环境实战30：让Ubuntu桌面自动更换壁纸</a></li>
        <li class="recent_comment_body">@DorothyDC我也没有用，看了一下应该是生成的xml里面是空的。。...</li>
        <li class="recent_comment_author">--听风流水</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/youxia/p/java007.html#3523357">3. Re:这些年一直记不住的 Java I/O</a></li>
        <li class="recent_comment_body">不错，收藏了。</li>
        <li class="recent_comment_author">--马三小伙儿</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/youxia/p/java007.html#3523049">4. Re:这些年一直记不住的 Java I/O</a></li>
        <li class="recent_comment_body">@路上的脚印我测试过，运行没问题，不过是在Ubuntu中。你用的是否Windows？把分隔符改成"\r\n"试试。...</li>
        <li class="recent_comment_author">--京山游侠</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/youxia/p/java007.html#3522997">5. Re:这些年一直记不住的 Java I/O</a></li>
        <li class="recent_comment_body">public static void readFromFile(String filename){ double price; int unit; Strin......</li>
        <li class="recent_comment_author">--路上的脚印</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/youxia/p/java007.html#3522921">6. Re:这些年一直记不住的 Java I/O</a></li>
        <li class="recent_comment_body">仔细对比一下 POSIX 的 IO 和 ANSI C 中的IO，你会发现后者本来就暗含有流和缓冲的思想。so，本来就是 JAVA 的 API 太复杂。<br>不过你总结得不错。</li>
        <li class="recent_comment_author">--onionz</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/youxia/p/java007.html#3522909">7. Re:这些年一直记不住的 Java I/O</a></li>
        <li class="recent_comment_body">写的很棒!</li>
        <li class="recent_comment_author">--haiziguo</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/youxia/p/linux033.html#3522839">8. Re:Linux应用环境实战33：深入理解JavaScript，以及Linux下的开发调试工具</a></li>
        <li class="recent_comment_body">不是前端工程师 JavaScript 功力都这么深厚？</li>
        <li class="recent_comment_author">--铁牯牛</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/youxia/p/java007.html#3522838">9. Re:这些年一直记不住的 Java I/O</a></li>
        <li class="recent_comment_body">Java阵营的飘过。Java I/O 的 API 中小类众多，不是你一个人记不住。<br>看了博主的文章茅塞顿开，记住 Decorator 模式 Java I/O 就记住了一半。<br>好文当顶。</li>
        <li class="recent_comment_author">--铁牯牛</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/youxia/p/linux033.html#3521336">10. Re:Linux应用环境实战33：深入理解JavaScript，以及Linux下的开发调试工具</a></li>
        <li class="recent_comment_body">精精华</li>
        <li class="recent_comment_author">--fo0ol</li>
</ul>
</div>
        </div>
    </div>
</div>
<div id="topview_posts_wrap">
    <div id="cell">
        <img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/icon-group.jpg" vspace="2" hspace="5" align="left">
        <h3>阅读排行榜</h3>
        <div class="RecentComment">
            <div id="TopViewPostsBlock"><ul><li><a href="http://www.cnblogs.com/youxia/p/linux012.html">1. Linux 桌面美化那点事儿(29911)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux009.html">2. 在 Linux 中使用搜狗拼音输入法以及搞定 Flash 和支付宝(18464)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux002.html">3. 在 Linux 打造属于自己的 Vim(18304)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux-philosophy.html">4. Linux 江湖系列阶段性总结(11439)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux014.html">5. Linux 中优秀的文本化编辑思想大碰撞（Markdown、LaTeX、MathJax）(8561)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux003.html">6. X Window 的奥秘(8186)</a></li><li><a href="http://www.cnblogs.com/youxia/p/java002.html">7. JDK 中的证书生成和管理工具 keytool(7314)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux024.html">8. Fedora 21 安装 Nvidia 驱动以及失败后的补救方法(7158)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux021.html">9. 虚拟机体验之 VirtualBox 篇 —— 性能强大的经典架构(6439)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux004.html">10. Linux 桌面系统字体配置要略(6256)</a></li></ul></div>
        </div>
    </div>
</div><div id="topfeedback_posts_wrap">
    <div id="cell">
        <img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/icon-group.jpg" vspace="2" hspace="5" align="left">
        <h3>评论排行榜</h3>
        <div class="RecentComment">
            <div id="TopFeedbackPostsBlock"><ul><li><a href="http://www.cnblogs.com/youxia/p/linux-philosophy.html">1. Linux 江湖系列阶段性总结(46)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux033.html">2. 深入理解 JavaScript，以及 Linux 下的开发调试工具(31)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux012.html">3. Linux 桌面美化那点事儿(22)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux031.html">4. 像黑客一样使用 Linux 命令行(15)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux014.html">5. Linux 中优秀的文本化编辑思想大碰撞（Markdown、LaTeX、MathJax）(13)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux001.html">6. 玩转 Linux 系统的方法论(12)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux013.html">7. Linux 中我该如何备份系统(8)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux017.html">8. 适合数值计算的语言需要具备什么样的特色(7)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux002.html">9. 在 Linux 打造属于自己的 Vim(7)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux028.html">10. 在 Ubuntu 15.04 中使用 ubuntu-make、Eclipse 4.4、Java 8 以及 WTP(7)</a></li></ul></div>
        </div>
    </div>    
</div>
<div id="sidebar_topdiggedposts" class="sidebar-block"><div id="topdigg_posts_wrap">
<div id="cell">
<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/icon-group.jpg" vspace="2" hspace="5" align="left"><h3>推荐排行榜</h3>
<div class="RecentComment">
	<div id="TopDiggPostsBlock"><ul><li><a href="http://www.cnblogs.com/youxia/p/linux033.html">1. 深入理解 JavaScript，以及 Linux 下的开发调试工具(73)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux-philosophy.html">2. Linux 江湖系列阶段性总结(61)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux012.html">3. Linux 桌面美化那点事儿(43)</a></li><li><a href="http://www.cnblogs.com/youxia/p/java007.html">4. 这些年一直记不住的 Java I/O(32)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux001.html">5. 玩转 Linux 系统的方法论(17)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux002.html">6. 在 Linux 打造属于自己的 Vim(11)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux014.html">7. Linux 中优秀的文本化编辑思想大碰撞（Markdown、LaTeX、MathJax）(11)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux031.html">8. 像黑客一样使用 Linux 命令行(11)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux010.html">9. Bash 脚本编程语言中的美学与哲学(7)</a></li><li><a href="http://www.cnblogs.com/youxia/p/linux013.html">10. Linux 中我该如何备份系统(5)</a></li></ul></div>
</div>
</div></div></div></div><script type="text/javascript">loadBlogSideColumn();</script>
			</div>
		</td>
		<td class="MainCell">
			<div id="main">
				
<div id="post_detail">
	<div class="post">
		<div class="posthead">
			<h2>
				<a id="cb_post_title_url" class="singleposttitle" href="http://www.cnblogs.com/youxia/p/linux008.html">使用 GCC 和 GNU Binutils 编写能在 x86 实模式运行的 16 位代码</a>
			</h2>
 			Posted on <span id="post-date">2014-08-24 15:30</span> <a href="http://www.cnblogs.com/youxia/">京山游侠</a> 阅读(<span id="post_view_count">3212</span>) 评论(<span id="post_comment_count">5</span>)  <a href="https://i.cnblogs.com/EditPosts.aspx?postid=3932679" rel="nofollow">编辑</a> <a href="#" onclick="AddToWz(3932679);return false;">收藏</a>
			<script type="text/javascript">var allowComments=true,cb_blogId=20135,cb_entryId=3932679,cb_blogApp=currentBlogApp,cb_blogUserGuid='eb5a360b-63cf-dd11-9e4d-001cf0cd104b',cb_entryCreatedDate='2014/8/24 15:30:00';loadViewCount(cb_entryId);</script>
			
		</div>
		<div class="postbody"><div id="cnblogs_post_body"><a name="_labelTop"></a><div id="navCategory"><p style="font-size:18px"><b>阅读目录</b></p><ul><li><a href="#_label0">总结：</a></li></ul></div><p>　　不可否认，这次的标题有点长。之所以把标题写得这么详细，主要是为了搜索引擎能够准确地把确实需要了解 GCC 生成 16 位实模式代码方法的朋友带到我的博客。先说一下背景，编写能在 x86 实模式下运行的 16 位代码，这个话题确实有点复古，所以能找到的资料也相应较少。要运行 x86 实模式的程序，目前我知道的只有两种方式，一种是使用 DOS 系统，另一种是把它写成引导扇区的代码，在系统启动时直接运行。很显然，许多讲自己实现操作系统的书籍都会讲到 x86 实模式，也只有自己实现操作系统引导的朋友需要用到 x86 实模式，所以我这篇文章的阅读用户数肯定很少，虽然我自认为它填补了网上关于该话题相关资料缺乏的空白。因此，凡是逛到我这篇文章的朋友，请点一下推荐，谢谢。</p>
<p>　　为什么说我这篇博客填补了相关话题的空白呢？那是因为不管是那些写书的，还是网上写文章的，一旦需要编写 16 位的实模式代码，都喜欢拿 NASM 说事儿，一点也不顾 GNU AS 的感受。当然，这是有历史原因的，因为 Linux 自从其诞生起就是 32 位，就是多用户多任务操作系统，所以 GCC 和 Gnu AS 一移植到 Linux 上就是用来编写 32 位保护模式的代码的。而且，ELF 可执行文件格式也只有 ELF32 和 ELF64，没听说过有 ELF16 的。即使是 Linux 自己，刚诞生的时候（1991年），也只有使用 as86 汇编器来编写自己的 16 位启动代码，直到 1995 年以后，GNU AS 才逐步加入编写 16 位代码的能力。</p>
<p>　　下面开始我的 GCC 和 GNU Binutils 的 16 位代码之旅。我决定使用 DOS 作为我的测试环境，所以最后生成的可执行文件都把它制作成 DOS 系统中可运行的 Plain Binary 格式。第一步安装一个 qemu 虚拟机来运行 FreeDOS，安装虚拟机在 Ubuntu 中只需要一个 sudo apt-get install qemu 命令就可以完成，所以我就不截图了。但是 FreeDOS 的软盘映像文件需要到 Qemu 的官网上面去下载，下载地址如下图：<br>
<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/241249183784711.png" alt="" width="720"></p>
<p>　　使用 qemu-system-i386 -fda freedos.img 可以运行 Qemu 虚拟机和 FreeDOS 系统，如下图：<br>
<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/241254186742622.png" alt="" width="720"></p>
<p>　　因为汇编语言更接近底层，而 C 语言更高级，所以先从汇编语言开始，逐步过渡到 C 语言。先写一个简单的、能在 DOS 中显示一个“Hello，world！”的汇编语言程序，考虑到我之后会使用该程序调用 C 语言的 main 函数，并且该程序负责让程序运行结束后顺利返回 DOS 系统，所以我把这个程序命名为 test_code16_startup.s。其代码如下：<br>
<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/241253258317309.png" alt="" width="720"></p>
<p>　　下面对以上代码进行简单解释：</p>
<p>　　1. GNU AS 汇编器使用的汇编语言采用的是 AT&amp;T 语法，该语法和 Intel 语法不同。我更喜欢 AT&amp;T 的语法，原因有两个，一是 AT&amp;T 语法是 Linux 世界中通用的标准，二是 AT&amp;T 语法在某些概念方面确实理解起来更简单（比如内存寻址模式）。有汇编语言基础的人，AT&amp;T 语法学起来也很快，主要有以下几条：①汇编指令后面跟有操作数长度的后缀，比如 mov 指令，如果操作数是 8 位，则用 movb，如果操作数是 16 位，则用 movw，如果操作数是 32 位，则用 movl，如果操作数是 64 位，则用 movq，其余指令依此类推；②操作数的顺序是源操作数在前，目标操作数在后，比如 movw %cs, %ax 表示把 cs 寄存器中的数据移动到 ax 寄存器中，这个顺序和 Intel 汇编语法正好相反；③所有的寄存器使用 % 前缀，如 %ax, %di, %esp 等；④对于立即数，需要使用 <span>$ </span>前缀，比如 <span>$</span>4,&nbsp; <span>$</span>0x0c，而且如果一个数字是以 0 开头，则是 8 进制，以其它数字开头，是 10 进制，以 0x 开头则是 16 进制，标号当立即数使用时，需要 <span>$ </span>前缀，比如上面的 pushw <span>$</span>message，而标号当函数名使用时，不需要 <span>$ </span>前缀，比如上面的 callw display_str；⑤内存寻址方式，众所周知，x86 寻址方式众多，什么直接寻址、间接寻址、基址寻址、基址变址寻址等等让人眼花缭乱，而 AT&amp;T 语法对内存寻址方式做了一个很好的统一，其格式为 <var>section</var>:<var>displacement</var>(<var>base</var>, <var>index</var>, <var>scale</var>)，其中 section 是段地址，displacement 是位移，base 是基址寄存器，index 是索引，scale 是缩放因子，其计算方式为线性地址=section + displacement + base + index*scale，最重要的是，可以省略以上格式中的一个或多个部分，比如 movw 4, %ax 就是把内存地址 4 中的值移动到 ax 寄存器中，movw 4(%esp), %ax 就是把 esp+4 指向的地址中的值移动到 ax 寄存器中，依此类推。我上面的介绍是不是全网络最简明的 AT&amp;T 汇编语法教程？</p>
<p>　　2. 在以上代码中我全部使用的都是 16 位的指令，如 movw、pushw、callw 等，并且直接在代码中定义了字符串“Hello, world！”。</p>
<p>　　3. 在以上代码中使用了函数 display_str，在调用 display_str 之前，我使用 pushw <span>$</span>15 和 pushw <span>$</span>message 将参数从右向左依次压栈，然后使用 callw 指令调用函数，这和 C 语言的函数调用约定是一样的。调用 callw 指令会自动将 %ip 寄存器压栈，而在函数开始时，我又用 pushw %bp 将 %bp 寄存器压栈，所以 %esp 又向下移动了 4 个字节，所以在函数中使用 0x4(%esp) 和 0x6(%esp) 可以访问到这两个参数。在 32 位代码中，由于调用函数时压栈的是 %eip 和 %ebp，所以需要使用 0x8(%esp) 和 0xc(%esp) 来依次访问压栈的参数。关于汇编语言函数调用的细节，我这里有一本好书<a href="http://files.cnblogs.com/youxia/Linux%E6%B1%87%E7%BC%96%E7%BC%96%E7%A8%8B%E6%8C%87%E5%8D%97.pdf">Linux汇编编程指南.pdf</a>。这是一本免费的英文版电子书，其原名为《Programming from the ground up》。</p>
<p>　　4. 以上代码使用 BIOS 中断 int 0x10 来输出字符串，使用 DOS 中断 int 0x21 来返回 DOS 系统。</p>
<p>　　5. 最重要的是，需要使用 .code16 指令让汇编器将程序汇编成 16 位的代码。</p>
<p>　　代码完成后，使用下面一串命令就可以把它进行汇编、链接，然后转换成 DOS 下的纯二进制格式（Plain Binary），最后复制到 FreeDOS.img 中，使用 Qemu 虚拟机执行 FreeDOS，然后运行该 16 位实模式程序。这一串命令及其运行效果如下图：<br>
<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/241342463781040.png" alt="" width="720"></p>
<p>　　这些命令中比较重要的选项我都特意标出来了。由于我用的是 64 位的环境，所以调用 as 命令的时候需要指定 --32 选项，调用 ld 命令的时候需要指定 -m elf_i386 选项。指定以上选项后，生成的是 32 位的 ELF 目标文件，否则默认会生成 64 位的 ELF 目标文件，如果目标文件是 64 位，以后和 C 语言生成的目标文件连接时会出问题。使用 32 位环境的朋友们不用特意指定这两个选项。由于 DOS 系统总是把 Plain Binary 文件载入到 0x100 地址处执行，所以调用 ld 命令时，需要指定 -Ttext 0x100 选项。ld 命令执行完成后，生成的是 ELF 格式的可执行文件 test.elf，最后需要调用 objcopy 生成纯二进制文件，-j .text 选项的意思是只需要代码段，因为我把“Hello, world!”也是定义在代码段中的，-O binary 选项指定输出格式为纯二进制文件，输出文件为 test.com。最后，将 freedos.img 镜像文件 mount 到 Ubuntu 中，将 test.com 拷贝到其中，然后 umount，然后运行虚拟机，在 DOS 中运行 test，就可以看到效果了。</p>
<p>　　除了 as 和 ld，GNU Binutils 中的其它程序也是写程序和分析程序时的好帮手。可以使用 readelf -S 查看 test.elf 文件中的所有段，也可以使用 objdump -s 命令将 test.elf 中的数据以 16 进制形式输入，如下图：<br>
<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/241359046744683.png" alt="" width="720"></p>
<p>　　当然，也可以使用 objdump -d 或者 objdump -D 将程序进行反汇编，查看是否真正生成了 16 位代码，如下图：（反汇编时一定要指定 -m i8086 选项）<br>
<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/241400500181333.png" alt="" width="720"></p>
<p>　　也可以对纯二进制格式的文件进行反汇编，必须指定 -b binary 选项，如下图，对 test.com 进行反汇编：<br>
<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/241402537997382.png" alt="" width="720"></p>
<p>　　反汇编时，一定要指定 -m i8086 选项，否则 objdump 不知道反汇编的是 16 位代码。（前面提到过 Linux 从诞生起就是 32 位，所以 ELF 只有 32 位和 64 位两种，没有 16 位的ELF格式。）如下图，如果使用 -m i386 选项进行反汇编，反汇编结果将不知所云：<br>
<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/241405535038114.png" alt="" width="720"></p>
<p>　　下面进入 C 语言的世界。为了搞清楚 C 语言生成的 16 位代码的汇编指令有哪些特别之处，先写一个简单的 C 语言程序进行调研，如下图：<br>
<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/241426053312502.png" alt="" width="720"></p>
<p>　　该程序有以下特点：</p>
<p>　　1. 程序的开头使用了 __asm__(".code16\n") 嵌入汇编指令，以指示 as 生成 16 位代码；</p>
<p>　　2. display_str 函数的签名和之前汇编语言中的相同，可以使用它来观察 C 语言生成的代码如何传递参数。</p>
<p>　　使用下面的命令对程序进行编译和反汇编，如下图：<br>
<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/241429264241838.png" alt="" width="720"></p>
<p>　　从上图可以看出，C 语言生成的代码虽然是 16 位，但是它有如下特点：①从生成的 display_str 函数中可以看出，函数一开始是 push %ebp，而不是 push %bp；②在 display_str 函数中获取参数的位置分别为 0x8(%ebp) 和 0xc(%ebp)，而不是我在汇编语言中写的 0x4(%ebp) 和 0x6(%ebp)；③从生成的 main 函数可以看出，调用 diaplay_str 之前，没有使用 push 命令把参数压栈，而是直接通过 sub <span>$</span>0x18, %esp 调整 %esp 的位置，然后使用 mov 指令将参数放到指定位置，和使用 push 指令的效果相同；④虽然我在 display_str 函数的定义中故意将长度参数定义为 short，但是从生成的代码中可以看到依然是每隔 4 个字节放一个参数。</p>
<p>　　另外需要说明的是，调用 gcc 时除了指定 -c 选项指示它只编译不连接外，还要指定 -m32 选项，这样才会生成 32 位的汇编代码，而只有在 32 位的汇编代码中使用 .code16 指令，才能编译成 16 位的机器码。如果没有指定 -m32 选项，则生成的是 64 位汇编代码，然后汇编时会出错。使用 -m32 选项后，生成的目标文件是 ELF32 格式。ELF32 格式的目标文件只能和 ELF32 格式的目标文件连接，这也是为什么前面的 as 和 ld 需要指定 --32 和 -m elf_i386 选项的原因。</p>
<p>　　通过以上分析，似乎可以得出以下结论：只需要将汇编代码中的 pushw %bp 更改为 pushl %ebp，然后将获取参数的位置调整为 0x8(%ebp) 和 0xc(%ebp)，就可以从 C 语言里面成功调用到汇编语言中的函数了。而事实上，还有一点点小差距。从上面的反汇编代码中可以看到，函数调用时使用的是 16 位的 call 指令，该指令压栈的是 %ip，而不是 %eip，而 C 语言生成的函数框架中获取的参数位置是按照将 %eip 压栈计算出来的，它们之间差了两个字节。</p>
<p>　　为了证明我以上判断的准确性，我将上面的C语言程序和汇编程序修改后，编译连接成一个完整的程序，看看它究竟能否正确运行。如下图：<br>
<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/241448101121330.png" alt="" width="720"></p>
<p>　　C语言程序修改很简单，就是去掉了 display_str 函数的实现，只保留声明。汇编代码如下图：<br>
<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/241449122848290.png" alt="" width="720"></p>
<p>　　汇编语言的更改包含以下几个地方：将 display_str 函数导出，将 pushw %bp 改为 pushl %ebp，同时修改获取参数的位置。编译、连接、运行程序的指令如下：<br>
<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/241451148463868.png" alt="" width="720"></p>
<p>　　可以看到“Hello world from C language”没有正确显示出来。上面的命令都是前面用过的，不需要多解释，唯一不同的是使用 C 语言写的程序多了一个 .rodata 段，所以在 objcopy 的时候需要把这个段也包含进来。</p>
<p>　　由于 Ｃ 语言生成的函数框架都是从 0x8(%ebp) 开始取参数，它认为 0x0(%ebp) 是 old ebp，0x4(%ebp)是 %eip，而事实上使用 16 位的 call 指令调用函数后，0x4(%ebp) 中是 %ip 而不是 %eip，所以要从 0x6(%ebp) 开始取参数。我们不可能修改 C 语言生成的函数框架，只能看看能否将 16 位的 call 改成 32 位的 call。</p>
<p>　　办法当然是有的，那就是不使用 .code16，而使用 .code16gcc。.code16gcc 和 .code16 不同的地方就在于它生成的汇编代码在使用到 call、ret、jump 等指令时，都生成 32 位的机器码，相当于 calll，retl，jumpl。这也是 .code16gcc 叫 .code16gcc 的原因，因为它就是配合 GCC 生成的函数框架使用的。</p>
<p>　　下面再来修改代码，C 语言代码修改很简单，只需要将 .code16 改成 .code16gcc 即可，如下图：<br>
<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/241502074872253.png" alt="" width="720"></p>
<p>　　通过反汇编，可以看到它使用了 32 位的 calll 和 retl，如下图：<br>
<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/241503143786287.png" alt="" width="720"></p>
<p>　　汇编程序的修改主要是将 .code16 改为 .code16gcc，然后手动将 callw 改成 calll，将 retw 改成 retl，如下图：<br>
<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/241504336127661.png" alt="" width="720"></p>
<p>　　最后，编译连接，拷贝到 freedos.img，运行虚拟机，查看运行效果，如下图：<br>
<img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/241505305968704.png" alt="" width="720"></p>
<p>　　大功告成，运行效果如上图。</p>
<div style="text-align: right"><a href="#_labelTop">回到顶部</a><a name="_label0"></a></div><h2>总结：</h2>
<p>　　编写运行于 x86 实模式下的 16 位代码是一个很复古的话题，编写能在 DOS 下运行的 Plain Binary 可执行文件是一个更复古的话题。以往，凡是需要使用 x86 的 16 位实模式的时候，作者都喜欢用 NASM 来编程。比如《30天自制操作系统》、《Orange's 一个操作系统的实现》、《x86汇编语言——从实模式到保护模式》等书籍都以 NASM 汇编器和 Intel 汇编语法作为示例。而且他们都是在进入 32 位保护模式后，才让汇编语言和 C 语言共同工作。</p>
<p>　　我用 Linux 操作系统，所以我就是想不管是写 32 位代码，还是 16 位代码，都能使用 GCC 和 GNU AS。我还想即使是在 16 位模式下，也能尽量少用汇编语言，多用 C 语言。经过努力，有了上面的文章。使用 GCC 和 GNU Binutils 编写运行于 x86 实模式的 16 位代码的过程如下：</p>
<p>　　1. 如果只用汇编语言编写 16 位程序，请使用 .code16 指令，并保证只使用 16 位的指令和寄存器；如果要和 C 语言一起工作，请使用 .code16gcc 指令，并且在函数框架中使用 pushl，calll，retl，leavel，jmpl，使用 0x8(%ebp) 开始访问函数的参数；很显然，使用 C 语言和汇编语言混编的程序可以在实模式下运行，但是不能在 286 之前的真实 CPU 上运行，因为 286 之前的 CPU 还没有 pushl、calll、retl、leavel、jmpl 等指令。</p>
<p>　　2. 使用 as 时，请指定 --32 选项，使用 gcc 时，请指定 -m32 选项，使用 ld 时，请指定 -m elf_i386 选项。如果是反汇编 16 位代码，在使用 objdump 时，请使用 -m i8086 选项。</p>
<p>　　3. 在 DOS 中运行的 .com 文件会被加载到 0x100 处执行，所以使用 ld 连接时需指定 -Ttext 0x100 选项；引导扇区的代码会被加载到 0x7c00 处执行，所以使用 ld 连接时需指定 -Ttext 0x7c00 选项。</p>
<p>　　4. 使用 gcc、as、ld 生成的程序默认都是 ELF 格式，而在 DOS 下运行的 .com 程序是 Plain Binary 的，在引导扇区运行的代码也是 Plain Binary 的，所以需要使用 objcopy 将 ELF 文件中的代码段和数据段拷贝到一个 Plain Binary 文件中，使用 -O binary 选项； Plain Binary 文件也可以反汇编，在使用 objdump 时需指定 -b binary 选项。</p>
<p>&nbsp;</p>
<p>（京山游侠于2014-08-24发布于博客园，转载请注明出处。）</p></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory">分类: <a href="http://www.cnblogs.com/youxia/category/582949.html" target="_blank">[02]Linux江湖</a></div>
<div id="EntryTag">标签: <a href="http://www.cnblogs.com/youxia/tag/Linux/">Linux</a>, <a href="http://www.cnblogs.com/youxia/tag/GCC/">GCC</a>, <a href="http://www.cnblogs.com/youxia/tag/Binutils/">Binutils</a>, <a href="http://www.cnblogs.com/youxia/tag/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/">汇编语言</a>, <a href="http://www.cnblogs.com/youxia/tag/C%E8%AF%AD%E8%A8%80/">C语言</a>, <a href="http://www.cnblogs.com/youxia/tag/16%E4%BD%8D%E4%BB%A3%E7%A0%81/">16位代码</a>, <a href="http://www.cnblogs.com/youxia/tag/%E5%AE%9E%E6%A8%A1%E5%BC%8F/">实模式</a></div>
<div id="blog_post_info"><div id="green_channel">
        <a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(3932679,cb_blogId,1);green_channel_success(this,'谢谢推荐！');">好文要顶</a>
            <a id="green_channel_follow" onclick="follow('eb5a360b-63cf-dd11-9e4d-001cf0cd104b');" href="javascript:void(0);">关注我</a>
    <a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a>
    <a id="green_channel_weibo" href="javascript:void(0);" title="分享至新浪微博" onclick="ShareToTsina()"><img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/icon_weibo_24.png" alt=""></a>
    <a id="green_channel_wechat" href="javascript:void(0);" title="分享至微信" onclick="shareOnWechat()"><img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/wechat.png" alt=""></a>
</div>
<div id="author_profile">
    <div id="author_profile_info" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/youxia/" target="_blank"><img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/20160930215813.png" class="author_avatar" alt=""></a>
        <div id="author_profile_detail" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/youxia/">京山游侠</a><br>
            <a href="http://home.cnblogs.com/u/youxia/followees">关注 - 182</a><br>
            <a href="http://home.cnblogs.com/u/youxia/followers">粉丝 - 389</a>
        </div>
    </div>
    <div class="clear"></div>
    <div id="author_profile_honor"></div>
    <div id="author_profile_follow">
                <a href="javascript:void(0);" onclick="follow('eb5a360b-63cf-dd11-9e4d-001cf0cd104b');return false;">+加关注</a>
    </div>
</div>
<div id="div_digg">
    <div class="diggit" onclick="votePost(3932679,'Digg')">
        <span class="diggnum" id="digg_count">5</span>
    </div>
    <div class="buryit" onclick="votePost(3932679,'Bury')">
        <span class="burynum" id="bury_count">1</span>
    </div>
    <div class="clear"></div>
    <div class="diggword" id="digg_tips">
    </div>
</div>
</div>
<div class="clear"></div>
<div id="post_next_prev"><a href="http://www.cnblogs.com/youxia/p/linux007.html" class="p_n_p_prefix">« </a> 上一篇：<a href="http://www.cnblogs.com/youxia/p/linux007.html" title="发布于2014-07-13 13:55">安装 Linux 时碰到的硬盘分区的陷阱及应对</a><br><a href="http://www.cnblogs.com/youxia/p/linux009.html" class="p_n_p_prefix">» </a> 下一篇：<a href="http://www.cnblogs.com/youxia/p/linux009.html" title="发布于2014-09-12 13:15">在 Linux 中使用搜狗拼音输入法以及搞定 Flash 和支付宝</a><br></div>
</div>

</div>
	</div></div><a name="!comments"></a><div id="blog-comments-placeholder"><div id="comments_pager_top"></div>
<h3>Feedback</h3>
	
			<div class="post">
				<div class="posthead">
					<h2>
						<a href="#3016319" class="layer">#1楼</a><a name="3016319" id="comment_anchor_3016319"></a>
						&nbsp;&nbsp;<span class="comment_actions"><a href="javascript:void(0);" onclick="return ReplyComment(3016319,'vMX2xjZe/LTLysLBI5f2a4fYFPhEHWxlZCkrS5AtFDgNudWK4Z5tHw==')">回复</a><a href="javascript:void(0);" onclick="return QuoteComment(3016319,'vMX2xjZe/LTLysLBI5f2a4fYFPhEHWxlZCkrS5AtFDgNudWK4Z5tHw==')">引用</a></span>
					</h2>
					 <span class="comment_date">2014-08-25 16:59</span> by <a id="a_comment_author_3016319" href="http://home.cnblogs.com/u/176725/" target="_blank">Dic4000</a> <a href="http://msg.cnblogs.com/send/Dic4000" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
				</div>
				<div class="postbody"><div id="comment_body_3016319" class="blog_comment_body">这么好的文章没人顶吗？<br>我顶之.......</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3016319,'Digg',this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3016319,'Bury',this)">反对(0)</a></div></div>
			</div>
		
			<div class="post">
				<div class="posthead">
					<h2>
						<a href="#3049709" class="layer">#2楼</a><a name="3049709" id="comment_anchor_3049709"></a>
						&nbsp;&nbsp;<span class="comment_actions"><a href="javascript:void(0);" onclick="return ReplyComment(3049709,'6qTeOHAVsBGDLUV6LnU8Mid+hPhqsL5co60EHsosITW9llpRfLtgfw==')">回复</a><a href="javascript:void(0);" onclick="return QuoteComment(3049709,'6qTeOHAVsBGDLUV6LnU8Mid+hPhqsL5co60EHsosITW9llpRfLtgfw==')">引用</a></span>
					</h2>
					 <span class="comment_date">2014-10-23 15:24</span> by <a id="a_comment_author_3049709" href="http://home.cnblogs.com/u/534849/" target="_blank">DegilnPSvy-</a> <a href="http://msg.cnblogs.com/send/DegilnPSvy-" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
				</div>
				<div class="postbody"><div id="comment_body_3049709" class="blog_comment_body">确实是好，顶！博主的文章质量都很高呢！<br><br>我按照博主文章做实验的时候遇到个问题，一开始那个Hello, wolrd!怎么都看不见，只是屏幕内容翻了几下。<br><br>后来加了一行代码，变成：<br>        movb <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-1-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1" role="math" style="width: 2.521em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.852em; height: 0px; font-size: 135%;"><span style="position: absolute; clip: rect(1.433em, 1001.78em, 2.663em, -1000em); top: -2.284em; left: 0em;"><span class="mrow" id="MathJax-Span-2"><span class="mn" id="MathJax-Span-3" style="font-family: MathJax_Main;">0</span><span class="mi" id="MathJax-Span-4" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mn" id="MathJax-Span-5" style="font-family: MathJax_Main;">0</span><span class="mo" id="MathJax-Span-6" style="font-family: MathJax_Main;">,</span></span><span style="display: inline-block; width: 0px; height: 2.284em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.345em; border-left: 0px solid; width: 0px; height: 1.328em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>0</mn><mi>x</mi><mn>0</mn><mo>,</mo></math></span></span><script type="math/tex" id="MathJax-Element-1">0x0, %dl         movb </script>0x5, %dh<br>就能看到了。博主可以mark一下，也许还有别人和我一样~</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3049709,'Digg',this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3049709,'Bury',this)">反对(0)</a></div></div>
			</div>
		
			<div class="post">
				<div class="posthead">
					<h2>
						<a href="#3188164" class="layer">#3楼</a><a name="3188164" id="comment_anchor_3188164"></a>
						&nbsp;&nbsp;<span class="comment_actions"><a href="javascript:void(0);" onclick="return ReplyComment(3188164,'jfOwQffos5nIugQgQYNAqvX9iM7Dkov1w/rvJ2zKqonW4Nx2Zv7WpA==')">回复</a><a href="javascript:void(0);" onclick="return QuoteComment(3188164,'jfOwQffos5nIugQgQYNAqvX9iM7Dkov1w/rvJ2zKqonW4Nx2Zv7WpA==')">引用</a></span>
					</h2>
					 <span class="comment_date">2015-05-20 15:25</span> by <a id="a_comment_author_3188164" href="http://home.cnblogs.com/u/759732/" target="_blank">xuexi_xx</a> <a href="http://msg.cnblogs.com/send/xuexi_xx" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
				</div>
				<div class="postbody"><div id="comment_body_3188164" class="blog_comment_body">博主，那16位程序，用什么调试器调试啊？ gdb行吗？？？？</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3188164,'Digg',this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3188164,'Bury',this)">反对(0)</a></div></div>
			</div>
		
			<div class="post">
				<div class="posthead">
					<h2>
						<a href="#3189834" class="layer">#4楼</a><a name="3189834" id="comment_anchor_3189834"></a>[<span class="louzhu">楼主</span>]
						&nbsp;&nbsp;<span class="comment_actions"><a href="javascript:void(0);" onclick="return ReplyComment(3189834,'Lx3jTE3W4W1r1m6R1zjDAS7REP74+53Y8W5GBTy84sVnr9gdEEhJeA==')">回复</a><a href="javascript:void(0);" onclick="return QuoteComment(3189834,'Lx3jTE3W4W1r1m6R1zjDAS7REP74+53Y8W5GBTy84sVnr9gdEEhJeA==')">引用</a></span>
					</h2>
					 <span class="comment_date">2015-05-21 21:13</span> by <a id="a_comment_author_3189834" href="http://www.cnblogs.com/youxia/" target="_blank">京山游侠</a> <a href="http://msg.cnblogs.com/send/%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
				</div>
				<div class="postbody"><div id="comment_body_3189834" class="blog_comment_body"><a href="#3188164" title="查看所回复的评论" onclick="commentManager.renderComments(0,50,3188164);">@</a>
xuexi_xx<br><fieldset class="comment_quote"><legend><a href="#3188164" title="查看引用原文">引用</a></legend>博主，那16位程序，用什么调试器调试啊？ gdb行吗？？？？</fieldset><br>16位程序用得少，也只是在写操作系统启动扇区的时候用一下。而启动扇区的调试使用虚拟机就可以了，Bochs自带调试功能，qemu可以和gdb组成C/S架构进行调试。</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3189834,'Digg',this)">支持(1)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3189834,'Bury',this)">反对(0)</a></div><span id="comment_3189834_avatar" style="display:none;">http://pic.cnblogs.com/face/16576/20160930215813.png</span></div>
			</div>
		
			<div class="post">
				<div class="posthead">
					<h2>
						<a href="#3348465" class="layer">#5楼</a><a name="3348465" id="comment_anchor_3348465"></a><span id="comment-maxId" style="display:none;">3348465</span><span id="comment-maxDate" style="display:none;">2016/1/15 13:31:39</span>
						&nbsp;&nbsp;<span class="comment_actions"><a href="javascript:void(0);" onclick="return ReplyComment(3348465,'4IM93UDObXTpiuOwHHrvI89pNuaa8cWODXucbAKliy2lo8EVj7tUUA==')">回复</a><a href="javascript:void(0);" onclick="return QuoteComment(3348465,'4IM93UDObXTpiuOwHHrvI89pNuaa8cWODXucbAKliy2lo8EVj7tUUA==')">引用</a></span>
					</h2>
					 <span class="comment_date">2016-01-15 13:31</span> by <a id="a_comment_author_3348465" href="http://home.cnblogs.com/u/881740/" target="_blank">linkerrors</a> <a href="http://msg.cnblogs.com/send/linkerrors" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
				</div>
				<div class="postbody"><div id="comment_body_3348465" class="blog_comment_body">博主，你好，我安全按照你的教程写，没有达到你这个效果啊！</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3348465,'Digg',this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3348465,'Bury',this)">反对(0)</a></div></div>
			</div>
		<div id="comments_pager_bottom"></div></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="#" onclick="return RefreshPage();">刷新页面</a><a href="#top">返回顶部</a></div>
<div id="comment_form_container">
<div id="commentform_title">发表评论</div>
<span id="tip_comment" style="color:Red"></span>
<p>
昵称：<input id="tbCommentAuthor" class="author" disabled="disabled" size="50" value="Douglas_at_HIT" type="text">
</p>
<div class="commentbox_main">
<div class="commentbox_title">
<div class="commentbox_title_left">评论内容：</div>
<div class="commentbox_title_right">
<img id="ubb_quote" class="comment_icon" src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/quote.gif" alt="引用" title="添加引用" onclick="insertUBB('tbCommentBody','quote')">
<img id="ubb_bold" class="comment_icon" src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/b.png" alt="粗体" title="添加粗体" onclick="insertUBB('tbCommentBody','b')">
<img id="ubb_url" class="comment_icon" src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/lk.png" alt="链接" title="添加链接" onclick="insertUbbUrl('tbCommentBody')">
<img id="ubb_indent" class="comment_icon" src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/indent.png" alt="缩进" title="添加首行缩进" onclick="insertIndent('tbCommentBody')">
<img id="ubb_code" class="comment_icon" src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/InsertCode.gif" alt="代码" title="添加代码" onclick="insertUbbCode()">
<img id="ubb_img" class="comment_icon" src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/img.gif" alt="图片" title="上传图片" onclick="OpenImageUploadWindow();">
</div>
</div>
<div class="clear"></div>
<textarea id="tbCommentBody" class="comment_textarea"></textarea>
</div>
<p id="commentbox_opt">
<input id="btn_comment_submit" class="comment_btn" value="提交评论" type="button">
<span id="span_comment_canceledit" style="display:none"><a href="javascript:void(0);" onclick="return CancelCommentEdit()">不改了</a></span>
<a href="javascript:void(0);" onclick="return logout();">退出登录</a>
        <a id="commentbox_opt_sub" href="javascript:void(0);" title="订阅后有新评论时会邮件通知您" onclick="commentManager.Subscribe()">订阅评论</a>
</p>
<div id="tip_comment2" style="color:Red"></div>
<p>
[Ctrl+Enter快捷键提交]
</p>
<div style="display:none">
<span id="comment_edit_id"></span><span id="span_parentcomment_id"></span>
<span id="span_parent_id"></span>
<span id="span_comment_replyto"></span>
<span id="span_comment_posted"></span>
</div>
</div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="ad_t2"><a href="http://www.ucancode.com/index.htm" target="_blank">【推荐】50万行VC++源码: 大型组态工控、电力仿真CAD与GIS源码库</a><br><a href="http://vcloud.163.com/?adchannel=bp_cnblogs2" target="_blank">【推荐】用1%的研发投入，搭载3倍性能的网易视频云技术</a><br><a href="http://rongcloud.cn/reports/journal2" target="_blank">【推荐】融云发布 App 社交化白皮书 IM 提升活跃超 8 倍</a><br></div>
<div id="opt_under_post"></div>
<div id="ad_c1" class="c_ad_block"><a href="http://www.gcpowertools.com.cn/order/collectdemand.htm?utm_source=cnblogs&amp;utm_medium=blogpage&amp;utm_term=bottom&amp;utm_content=ads&amp;utm_campaign=community" target="_blank"><img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/24442-20161107115546061-1502903756.png" alt="" width="300" height="250"></a></div>
<div id="under_post_news"><div class="itnews c_ad_block"><b>最新IT新闻</b>:<br> ·  <a href="http://news.cnblogs.com/n/557308/" target="_blank">李志飞：出门问问是不是一家AI公司重要吗？</a><br> ·  <a href="http://news.cnblogs.com/n/557301/" target="_blank">为解决发展中国家卫生问题 盖茨联手Firmenich打造“粪便香水”</a><br> ·  <a href="http://news.cnblogs.com/n/557326/" target="_blank">微软发布同时支持Windows和Linux平台的新SQL Server预览版</a><br> ·  <a href="http://news.cnblogs.com/n/557304/" target="_blank">Facebook收购又一家面部识别初创公司强化对抗Snapchat</a><br> ·  <a href="http://news.cnblogs.com/n/557306/" target="_blank">矢量化艺术效果生成macOS应用Primitive发布</a><br>» <a href="http://news.cnblogs.com/" title="IT新闻" target="_blank">更多新闻...</a></div></div>
<div id="ad_c2" class="c_ad_block"><a href="https://www.jiguang.cn/devservice/?from=cnblogs01" target="_blank"><img src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/24442-20161114133622451-1554357151.jpg" alt="" width="468" height="60"></a></div>
<div id="under_post_kb"><div class="itnews c_ad_block" id="kb_block"><b>最新知识库文章</b>:<br><div id="kb_recent"> ·  <a href="http://kb.cnblogs.com/page/555750/" target="_blank">循序渐进地代码重构</a><br> ·  <a href="http://kb.cnblogs.com/page/554496/" target="_blank">技术的正宗与野路子</a><br> ·  <a href="http://kb.cnblogs.com/page/553682/" target="_blank">陈皓：什么是工程师文化？</a><br> ·  <a href="http://kb.cnblogs.com/page/551422/" target="_blank">没那么难，谈CSS的设计模式</a><br> ·  <a href="http://kb.cnblogs.com/page/550625/" target="_blank">程序猿媳妇儿注意事项</a><br></div>» <a href="http://kb.cnblogs.com/" target="_blank">更多知识库文章...</a></div></div>
<div id="HistoryToday" class="c_ad_block"></div>
<script type="text/javascript">
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverAdT2();
    deliverAdC1();
    deliverAdC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);   
</script>
</div>


			</div>
		</td>
	</tr>
	<tr>
		<td colspan="2" class="FooterCell">
			
<p id="footer">
	Powered by: 
	<br>
	
	<a id="Footer1_Hyperlink3" name="Hyperlink1" href="http://www.cnblogs.com/" style="font-family:Verdana;font-size:12px;">博客园</a>
	<br>
	Copyright © 京山游侠
</p>

		</td>
	</tr>
</tbody></table>

<!--PageEndHtml Block Begin-->
<script language="javascript" type="text/javascript">
//生成目录索引列表
function GenerateContentList()
{
    var jquery_h3_list = $('#cnblogs_post_body h2');
    if(jquery_h3_list.length>0)
    {
        var content = '<a name="_labelTop"></a>';
        content    += '<div id="navCategory">';
        content    += '<p style="font-size:18px"><b>阅读目录</b></p>';
        content    += '<ul>';
        for(var i =0;i<jquery_h3_list.length;i++)
        {
            var go_to_top = '<div style="text-align: right"><a href="#_labelTop">回到顶部</a><a name="_label' + i + '"></a></div>';
            $(jquery_h3_list[i]).before(go_to_top);
            var li_content = '<li><a href="#_label' + i + '">' + $(jquery_h3_list[i]).text() + '</a></li>';
            content += li_content;
        }
        content    += '</ul>';
        content    += '</div>';
        if($('#cnblogs_post_body').length != 0 )
        {
            $($('#cnblogs_post_body')[0]).prepend(content);
        }
    }    
}
GenerateContentList();
</script>

<link rel="stylesheet" href="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/mono-blue.css">
<script src="%E4%BD%BF%E7%94%A8%20GCC%20%E5%92%8C%20GNU%20Binutils%20%E7%BC%96%E5%86%99%E8%83%BD%E5%9C%A8%20x86%20%E5%AE%9E%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E7%9A%84%2016%20%E4%BD%8D%E4%BB%A3%E7%A0%81%20-%20%E4%BA%AC%E5%B1%B1%E6%B8%B8%E4%BE%A0%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/highlight.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!--PageEndHtml Block End-->


<div style="position: absolute; width: 0px; height: 0px; overflow: hidden; padding: 0px; border: 0px none; margin: 0px;"><div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; padding: 0px; border: 0px none; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: italic; font-size-adjust: none; font-family: MathJax_Math,sans-serif;"></div></div></body></html>